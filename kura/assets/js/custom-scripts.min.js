jQuery(document).ready(function( $ ) {

	"use strict";
	
	// Sticky Sidebar
	function stickySidebar() {
		if ($( '.main-sidebar' ).data('effect') === 1 ) {

			var SidebarOffset = 0;

			$('.main-sidebar').stick_in_parent({
				parent: ".main-container-inner",
				offset_top: SidebarOffset,
				spacer: '.main-sidebar-wrap'
			});

			if ( $('.responsive-column').css('display') === 'none' ) {
				$('.main-sidebar').trigger("sticky_kit:detach");
			}
		}
	}

	$( window ).resize(function() {
		stickySidebar();
	});

	$( window ).load(function() {
		stickySidebar();
	});

	// Fixed Sidebar Scroll
	$('.fixed-sidebar').perfectScrollbar({
		suppressScrollX : true,
		includePadding : true,
		wheelSpeed: 3.5
	});

	// Responsive Menu 
	$( '.site-nav-mobile .menu-item-has-children' ).prepend( '<div class="sub-menu-btn"></div>' );
	$('.site-nav-mobile .sub-menu').before( '<span class="sub-menu-btn-icon"><i class="fa fa-sort-desc"></i></span>' );

	//Responsive sub-menu btn
	$('.sub-menu-btn').click(function(){
		$(this).closest('li').children('.sub-menu').slideToggle();
		$(this).closest('li').children('.sub-menu-btn-icon').children('i').toggleClass( 'fa-rotate-270' );
	});

	// Admin Bar Height
	var adminBar = 0;
	if ( $('body').hasClass('admin-bar') ) {
		adminBar = 32;
	}

	// Navigation Hover 
	$('.top-nav,.site-nav').find('li').hover(function () {
	    $(this).children('.sub-menu').stop().fadeIn( 200 );
	}, function() {
		$(this).children('.sub-menu').stop().fadeOut( 200 );
	});

	// Resposive Nav Menu btn
	$('.nav-btn').click(function(){
		$( ".site-nav-mobile" ).slideToggle( "slow" );
	});

	$( window ).resize(function() {
		if ($('.nav-btn').css('display') == 'none' ) {
			$( '.site-nav-mobile' ).css({'display':'none'});
	 	}
	});

	// Click event to scroll to top
	$('.backtotop').click(function(){
		$('html, body').animate( { scrollTop : 0},800);
		return false;
	});

	var	sldrItems = $('.infinity-carousel-wrap').data('columns'),
		sldrAutoplay = 0,
		sldrAutoplayTimeout = 0,
		sldrLoop = ($('.infinity-carousel-wrap').data('loop') === 1 && $('.infinity-carousel').children().length > 1 )? true: false,
		sldrMargin = $('.infinity-carousel-wrap').data('margin'),
		sldrStagePadding = $('.infinity-carousel-wrap').data('stagepadding'),
		sldrNavigation = ($('.infinity-carousel-wrap').data('navigation') !== 'off' )? true: false,
		sldrPagination = ($('.infinity-carousel-wrap').data('pagination') === 1 )? true: false,
		sldrslideby = $('.infinity-carousel-wrap').data('slideby'),
		sldrItemsDesktop = 2,
		sldrItemsTablet = 2;

	if (  sldrItems > 0 ) {
	
		if (sldrAutoplay === 0 ) {
			sldrAutoplay = false;

		} else {
			sldrAutoplayTimeout = sldrAutoplay;
			sldrAutoplay = true;
		}

		if( sldrItems === 1 ) {
			sldrItemsDesktop = 1,
			sldrItemsTablet = 1;
		}

	


	// Main Carousel Function
	$('.infinity-carousel').owlCarousel({
		slideBy: sldrslideby,
		items:sldrItems,
	    loop:sldrLoop,
	    stagePadding: sldrStagePadding,
	    margin:sldrMargin,
	    autoplay:sldrAutoplay,
	    autoplayTimeout:sldrAutoplayTimeout,
	    autoplayHoverPause: true,
	    controlsClass: 'carousel-controls center-width',
	    navContainerClass: 'carousel-nav',
	    navClass: ['carousel-prev','carousel-next'],
	    dotsClass: 'carousel-pagination',
	    dotClass: 'carousel-pagination-item',
		nav: sldrNavigation,
		navText: ['',''],
		dots: sldrPagination,
		responsiveClass:true,
	    responsive:{
	        0:{
	            items:1,
			    stagePadding: 0,
			    margin:0,
			    dots: false,
	        },
	        768:{
	            items:sldrItemsTablet,
	            stagePadding: 0,
			    margin:0
	        },
	        979:{
	            items:sldrItemsDesktop
	        },
	        1199:{
	            items:sldrItems
	        }
	    },
	   	smartSpeed: 600
	 });
    }


	// Remove Carousel Wrap Height
	$('.infinity-carousel-wrap').css( 'height', 'auto' );
	
	// Gallery Post Format Carousel 
	$(".entry-gallery").owlCarousel({
		items: 1,
		loop: $(".entry-gallery").children().length > 1,
		autoHeight:true,
		dots: false,
		nav: true,
		controlsClass: 'gallery-controls center-width',
	    navContainerClass: 'gallery-nav',
	    navClass: ['gallery-prev','gallery-next'],
	    dotsClass: 'gallery-pagination',
	    dotClass: 'gallery-pagination-item',
		navText: ['','']
	});

	// Search  FadeIn
	$('.search-btn').on( 'click', function() {
		$('.header-search-wrap').fadeIn(500);
		$( ".header-search-wrap input" ).focus();
	});

	// Search  Fadeout 
	$('.header-search-wrap').on( 'click', function(event) {
		if ( event.target.className !=='search_input' &&  event.target.className !=='fa fa-search' &&  event.target.className !== 'submit' ) {
			$('.header-search-wrap').fadeOut(500);
		}		
	});

	// header slide toggle
	$('.nav-toggle-btn').on('click', function () {
	    $('.mobile-nav').slideToggle();
	});

	var fixedSidebar =  $( ".fixed-sidebar" ).data('width');
	// Plus Sidebar Open
	$('.sidebar-btn').on('click', function () {
		$('.main-wrap').css( 'margin-left','-'+ fixedSidebar +'px' );
		$('.fixed-sidebar').css( 'right','0' );
		$('.fixed-sidebar-close').fadeIn(350);
		$('.sidebar-btn').css({
			'-webkit-transform' : 'rotate(45deg)',
			'-moz-transform' : 'rotate(45deg)',
			'-ms-transform' : 'rotate(45deg)',
			'transform' : 'rotate(45deg)'
		});
	});

	// Plus Sidebar Close
	$(' .fixed-sidebar-close, .fixed-sidebar-close-btn ').on('click', function () {
		$('.main-wrap').css( 'margin-left','0' );
		$('.fixed-sidebar').css( 'right','-'+fixedSidebar+'px' );
		$('.fixed-sidebar-close').fadeOut(350);
		$('.sidebar-btn').css({
			'-webkit-transform' : 'rotate(0deg)',
			'-moz-transform' : 'rotate(0deg)',
			'-ms-transform' : 'rotate(0deg)',
			'transform' : 'rotate(0deg)'
		});
	});

	// Comment Form 
	if( $('.comment-form').children().first().hasClass('custom-textarea') ) {
		$('.form-submit').before( $('.custom-textarea').clone() );
		$('.custom-textarea:first').remove();
	}

	// Preloader
	if ( $('.infinity-preloader').length ) {
		$( window ).on( 'load', function() {
			setTimeout(function(){
				$('.infinity-preloader > div').fadeOut( 500 );
				$('.infinity-preloader').fadeOut( 800 );
			}, 250);
		});
	}


}); // end dom ready